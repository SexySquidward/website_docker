

upstream flaskapp {
    server flask_app:8080;
}
upstream flaskapp2 {
    server flask_app2:5001;
}

server {
         listen 80;
         location / {
             proxy_pass http://flaskapp;
             proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header Host $host;
             proxy_redirect off;
            }
        location /app {
             proxy_pass http://flaskapp;
             proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header Host $host;
             proxy_redirect off;
            }
        }
server {
       listen 8081;
       location / {
            proxy_pass http://flaskapp2;
             proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header Host $host;
             proxy_redirect off;
        }
}












